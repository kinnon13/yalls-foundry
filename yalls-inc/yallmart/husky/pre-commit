#!/bin/sh
# Role: Husky pre-commit hook - validate transactions and lint cart code
# Path: yalls-inc/yallmart/husky/pre-commit

echo "🔍 Yallmart pre-commit checks..."

# Lint only yallmart files
npx eslint yalls-inc/yallmart/src/**/*.{ts,tsx} --max-warnings 0

if [ $? -ne 0 ]; then
  echo "❌ Yallmart lint failed"
  exit 1
fi

# Type check
npx tsc --noEmit --project yalls-inc/yallmart/tsconfig.json

if [ $? -ne 0 ]; then
  echo "❌ Yallmart type check failed"
  exit 1
fi

# Validate cart logic (stub)
echo "🛒 Validating cart calculations..."

echo "✅ Yallmart pre-commit passed"
