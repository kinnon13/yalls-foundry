#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo ""
echo "ğŸ›¡ï¸  Guard Flow: Pre-commit Architecture Check"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# Run all guard scripts
deno run -A scripts/guard/verify-structure.ts || {
  echo ""
  echo "âŒ Pre-commit blocked: Structure verification failed"
  exit 1
}

deno run -A scripts/guard/verify-supabase-config.ts || {
  echo ""
  echo "âŒ Pre-commit blocked: Supabase config verification failed"
  exit 1
}

deno run -A scripts/guard/verify-modules.ts || {
  echo ""
  echo "âŒ Pre-commit blocked: Module integrity verification failed"
  exit 1
}

echo ""
echo "âœ… Guard Flow passed - commit allowed"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
