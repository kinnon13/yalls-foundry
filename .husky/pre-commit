#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo ""
echo "🛡️  Guard Flow: Pre-commit Architecture Check"
echo "═══════════════════════════════════════════════════════════════════"
echo ""

# Run all guard scripts
deno run -A scripts/verify-structure.ts || {
  echo ""
  echo "❌ Pre-commit blocked: Structure verification failed"
  exit 1
}

deno run -A scripts/verify-supabase-config.ts || {
  echo ""
  echo "❌ Pre-commit blocked: Supabase config verification failed"
  exit 1
}

deno run -A scripts/verify-modules.ts || {
  echo ""
  echo "❌ Pre-commit blocked: Module integrity verification failed"
  exit 1
}

echo ""
echo "✅ Guard Flow passed - commit allowed"
echo "═══════════════════════════════════════════════════════════════════"
echo ""
